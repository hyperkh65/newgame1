<!DOCTYPE html>
<html>
<head>
    <title>THE PREHISTORIK - FIXED V4</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #game-container { border: 4px solid #3d2b1f; }
    </style>
</head>
<body>
    <div id="game-container"></div>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 400,
            parent: 'game-container',
            backgroundColor: '#60a0f0',
            pixelArt: true,
            physics: {
                default: 'arcade',
                arcade: { gravity: { y: 800 }, debug: false }
            },
            scene: {
                create: create,
                update: update
            }
        };

        const game = new Phaser.Game(config);
        let player;
        let cursors;

        function create() {
            // 바닥 생성
            const platforms = this.physics.add.staticGroup();
            const ground = this.add.rectangle(400, 380, 800, 40, 0x4d3319);
            platforms.add(ground);

            // 주인공 Sam - 이번에는 간단한 그래픽 대신 직관적인 도형으로 먼저 띄웁니다 (검은 화면 방지)
            player = this.add.container(100, 300);
            const body = this.add.rectangle(0, 0, 40, 60, 0xa05000); // 가죽옷
            const head = this.add.rectangle(0, -40, 30, 30, 0xf8b888); // 얼굴
            const eyes = this.add.rectangle(8, -45, 5, 5, 0x000000); // 눈
            const club = this.add.rectangle(25, -10, 40, 10, 0x603000); // 몽둥이
            
            player.add([body, head, eyes, club]);
            
            // 물리 적용
            this.physics.add.existing(player);
            player.body.setCollideWorldBounds(true);
            this.physics.add.collider(player, platforms);

            cursors = this.input.keyboard.createCursorKeys();
        }

        function update() {
            if (cursors.left.isDown) {
                player.body.setVelocityX(-160);
                player.setScale(-1, 1); // 좌로 뒤집기
            } else if (cursors.right.isDown) {
                player.body.setVelocityX(160);
                player.setScale(1, 1); // 우로 정렬
            } else {
                player.body.setVelocityX(0);
            }

            if (cursors.up.isDown && player.body.touching.down) {
                player.body.setVelocityY(-400);
            }
        }
    </script>
</body>
</html>
