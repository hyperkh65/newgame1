<!DOCTYPE html>
<html>
<head>
    <title>THE PREHISTORIK - 3D WORLD EDITION</title>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; perspective: 1000px; }
        #game-viewport { position: relative; width: 800px; height: 450px; background: linear-gradient(#4facfe, #00f2fe); border: 8px solid #2d1b0f; transform-style: preserve-3d; }
        canvas { width: 100%; height: 100%; image-rendering: pixelated; }
    </style>
</head>
<body>
    <div id="game-viewport">
        <canvas id="c"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        canvas.width = 800; canvas.height = 450;

        const state = { x: 400, y: 0, z: 0, vx: 0, vy: 0, frame: 0 };
        const groundY = 320;

        function draw3D() {
            ctx.clearRect(0,0,800,450);
            
            // 1. 3D 바닥 (원근법 적용)
            ctx.fillStyle = '#3d2b1f';
            ctx.beginPath();
            ctx.moveTo(0, groundY);
            ctx.lineTo(800, groundY);
            ctx.lineTo(1200, 600);
            ctx.lineTo(-400, 600);
            ctx.fill();

            // 바닥 그리드 (입체감 강화)
            ctx.strokeStyle = '#4d3319';
            for(let i=-1000; i<2000; i+=100) {
                let xOff = (i - state.x * 0.5) % 1000;
                ctx.beginPath();
                ctx.moveTo(400 + xOff/4, groundY);
                ctx.lineTo(400 + xOff, 600);
                ctx.stroke();
            }

            // 2. Sam 애니메이션 (3D 위치 감안)
            const samScale = 0.8 + (state.y * 0.001);
            ctx.save();
            ctx.translate(400, groundY + state.y);
            ctx.scale(samScale * (state.vx < 0 ? -1 : 1), samScale);

            // Shadow (3D 입체감의 핵심)
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.beginPath(); ctx.ellipse(0, 40, 30, 10, 0,0,Math.PI*2); ctx.fill();

            // Sam Main
            ctx.fillStyle = '#f8b888';
            ctx.beginPath(); ctx.ellipse(0, 0, 25, 35, 0,0,Math.PI*2); ctx.fill(); // Belly
            ctx.fillStyle = '#a05000'; ctx.fillRect(-22, -20, 44, 45); // Clothes
            ctx.fillStyle = '#f8b888'; ctx.fillRect(-15, -60, 30, 30); // Head
            ctx.fillStyle = '#603000'; ctx.fillRect(10, -20, 50, 15); // Club
            
            ctx.restore();
        }

        function update() {
            state.frame++;
            state.x += state.vx;
            state.y += state.vy;
            if (state.y < 0) state.vy += 0.8; // Gravity
            else { state.y = 0; state.vy = 0; }
            state.vx *= 0.9;

            draw3D();
            requestAnimationFrame(update);
        }

        window.onkeydown = (e) => {
            if (e.key === 'ArrowRight') state.vx = 8;
            if (e.key === 'ArrowLeft') state.vx = -8;
            if (e.key === ' ' && state.y === 0) state.vy = -15;
        };

        update();
    </script>
</body>
</html>
