<!DOCTYPE html>
<html>
<head>
    <title>THE PREHISTORIK - PHASER ENGINE V4</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background-color: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { box-shadow: 0 0 30px rgba(0,0,0,1); image-rendering: pixelated; }
    </style>
</head>
<body>
    <div id="game-container"></div>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: 320,
            height: 200,
            parent: 'game-container',
            pixelArt: true,
            zoom: 3,
            physics: {
                default: 'arcade',
                arcade: { gravity: { y: 600 }, debug: false }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        const game = new Phaser.Game(config);
        let player;
        let cursors;
        let monsters;

        function preload() {
            // 원작 감성의 픽셀 데이터 생성 (임시 대체지만 고퀄리티 유지 시도)
            this.load.crossOrigin = 'anonymous';
            // 실제 Sam의 스프라이트 시트가 올라가야 하는 자리
        }

        function create() {
            // 배경 (동굴)
            this.add.rectangle(0, 180, 640, 40, 0x4d3319).setOrigin(0);
            
            // 주인공 Sam 생성
            player = this.physics.add.sprite(50, 140);
            player.setCollideWorldBounds(true);
            
            // Sam의 도트 그래픽 구현 (Rectangle 대신 시각적 보완물)
            const graphics = this.make.graphics({ x: 0, y: 0, add: false });
            graphics.fillStyle(0xf8b888, 1);
            graphics.fillRect(4, 0, 16, 16); // 머리
            graphics.fillStyle(0x804000, 1);
            graphics.fillRect(4, 16, 16, 24); // 몸
            
            player.setTexture(player.generateTexture('sam-idle', 24, 40));

            cursors = this.input.keyboard.createCursorKeys();
            this.input.keyboard.on('keydown-SPACE', () => {
                if (player.body.onFloor()) player.setVelocityY(-250);
            });
        }

        function update() {
            if (cursors.left.isDown) {
                player.setVelocityX(-100);
                player.setFlipX(true);
            } else if (cursors.right.isDown) {
                player.setVelocityX(100);
                player.setFlipX(false);
            } else {
                player.setVelocityX(0);
            }
        }
    </script>
</body>
</html>
