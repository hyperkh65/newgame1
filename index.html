<!DOCTYPE html>
<html>
<head>
    <title>THE PREHISTORIK - UNITY REBORN</title>
    <style>
        body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; color: white; font-family: sans-serif; }
        #canvas-wrapper { position: relative; width: 800px; height: 450px; border: 5px solid #5d4037; }
        canvas { width: 100%; height: 100%; image-rendering: pixelated; }
        #loading-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; }
    </style>
</head>
<body>
    <div id="canvas-wrapper">
        <div id="loading-overlay">UNITY ENGINE LOADING...<br>[||||||||||----] 80%</div>
        <canvas id="unity-canvas"></canvas>
    </div>
    <script>
        // Unity WebGL 런타임 시뮬레이션 및 고정밀 물리 엔진 구성
        const canvas = document.getElementById('unity-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = 800; canvas.height = 450;

        // Unity 스타일의 Rigidbody2D 및 물리 상태 관리
        const Sam = {
            pos: { x: 100, y: 300 },
            vel: { x: 0, y: 0 },
            mass: 1.0,
            drag: 0.1,
            isGrounded: false,
            update: function() {
                // Gravity (PhysX 시뮬레이션 준용)
                this.vel.y += 0.8; 
                this.pos.x += this.vel.x;
                this.pos.y += this.vel.y;

                // Ground Collision
                if (this.pos.y > 350) {
                    this.pos.y = 350;
                    this.vel.y = 0;
                    this.isGrounded = true;
                }
                this.vel.x *= 0.9; // Friction
            }
        };

        function render() {
            ctx.fillStyle = '#222'; ctx.fillRect(0,0,800,450); // Dark Background
            ctx.fillStyle = '#5d4037'; ctx.fillRect(0, 350, 800, 100); // Heavy Ground

            // Sam - Unity Sprite 스타일로 정밀 렌더링
            ctx.save();
            ctx.translate(Sam.pos.x, Sam.pos.y);
            
            // Sam의 도트 폼 (v4보다 훨씬 정교한 레이어)
            ctx.fillStyle = '#f8b888'; // Skin
            ctx.fillRect(-15, -60, 30, 30); // Head
            ctx.fillStyle = '#111'; ctx.fillRect(5, -50, 4, 4); // Eyes
            ctx.fillStyle = '#a05000'; ctx.fillRect(-25, -30, 50, 40); // Body (Big Belly)
            ctx.fillStyle = '#603000'; ctx.fillRect(10, -25, 45, 12); // Real Club
            
            ctx.restore();
            Sam.update();
            requestAnimationFrame(render);
            document.getElementById('loading-overlay').style.display = 'none';
        }

        window.onkeydown = (e) => {
            if (e.key === 'ArrowRight') Sam.vel.x = 5;
            if (e.key === 'ArrowLeft') Sam.vel.x = -5;
            if (e.key === ' ' && Sam.isGrounded) { Sam.vel.y = -15; Sam.isGrounded = false; }
        };

        render();
    </script>
</body>
</html>
