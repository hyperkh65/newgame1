<!DOCTYPE html>
<html>
<head>
    <title>AI SaaS - Smart 3D Office</title>
    <style>
        body { margin: 0; background: #0b0e14; overflow: hidden; font-family: 'Inter', sans-serif; }
        #canvas-container { width: 100vw; height: 100vh; }
        
        /* SaaS Dashboard UI */
        #ui-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #sidebar { position: absolute; left: 20px; top: 20px; width: 250px; background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); color: #fff; padding: 20px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); pointer-events: auto; }
        
        /* Floating Chat UI */
        #chat-window { display: none; position: absolute; right: 30px; bottom: 30px; width: 350px; height: 450px; background: rgba(15, 17, 26, 0.95); border: 1px solid #007bff; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); pointer-events: auto; flex-direction: column; overflow: hidden; }
        #chat-header { background: #007bff; color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between; }
        #chat-messages { flex: 1; padding: 15px; color: #ddd; font-size: 14px; overflow-y: auto; }
        #chat-input-area { padding: 10px; background: #222; display: flex; }
        #chat-input { flex: 1; background: transparent; border: none; color: white; outline: none; }
        
        .badge { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 10px; background: #007bff; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    <div id="ui-overlay">
        <div id="sidebar">
            <div class="badge">PLATFORM v1.0 BETA</div>
            <h1 style="font-size: 20px; margin: 0;">AI Agent Office</h1>
            <p style="font-size: 12px; color: #888;">지능형 가상 사무실 솔루션</p>
            <hr style="border: 0.5px solid rgba(255,255,255,0.1); margin: 20px 0;">
            <div id="active-list">
                <p style="font-size: 13px; color: #007bff;">● 마케팅 팀 (대기 중)</p>
                <p style="font-size: 13px; color: #007bff;">● 영업 팀 (업무 중)</p>
            </div>
        </div>

        <div id="chat-window">
            <div id="chat-header"><span id="agent-name">Agent Name</span> <button onclick="closeChat()" style="background:none; border:none; color:white; cursor:pointer;">✕</button></div>
            <div id="chat-messages">안녕하세요! 어떤 업무를 해결해 드릴까요?</div>
            <div id="chat-input-area">
                <input type="text" id="chat-input" placeholder="명령어를 입력하세요..." onkeypress="handleChat(event)">
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x0b0e14);
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0xffffff, 0.5));
        const pointLight = new THREE.PointLight(0x007bff, 1, 50);
        pointLight.position.set(0, 10, 0);
        scene.add(pointLight);

        // Floor (Modern Grid)
        const grid = new THREE.GridHelper(100, 50, 0x007bff, 0x111111);
        scene.add(grid);

        // Office Hub Structure
        const hubGeo = new THREE.BoxGeometry(10, 0.2, 10);
        const hubMat = new THREE.MeshPhongMaterial({ color: 0x111111 });
        const hub = new THREE.Mesh(hubGeo, hubMat);
        scene.add(hub);

        // Agents
        const agents = [];
        function createSaaSAgent(name, x, z, color) {
            const group = new THREE.Group();
            const body = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 2, 32), new THREE.MeshPhongMaterial({ color: color }));
            group.add(body);
            const head = new THREE.Mesh(new THREE.SphereGeometry(0.5), new THREE.MeshPhongMaterial({ color: 0xeeeeee }));
            head.position.y = 1.5;
            group.add(head);
            
            group.position.set(x, 1, z);
            group.userData = { name: name, role: name + " AI Expert" };
            scene.add(group);
            agents.push(group);
        }

        createSaaSAgent("Marketing", -5, -5, 0x007bff);
        createSaaSAgent("Sales", 5, -5, 0x00ff88);
        createSaaSAgent("Design", -5, 5, 0xff0088);

        camera.position.set(0, 10, 20);
        camera.lookAt(0,0,0);

        // Clicking Logic (Raycasting)
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        window.addEventListener('mousedown', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(agents, true);
            
            if (intersects.length > 0) {
                const target = intersects[0].object.parent;
                openChat(target.userData.name);
            }
        });

        function openChat(name) {
            document.getElementById('chat-window').style.display = 'flex';
            document.getElementById('agent-name').innerText = name + " AI Agent";
            document.getElementById('chat-messages').innerHTML = "<b>" + name + " 에이전트</b>가 연결되었습니다. 어떤 업무를 처리할까요?";
        }

        function closeChat() {
            document.getElementById('chat-window').style.display = 'none';
        }

        function handleChat(e) {
            if (e.key === 'Enter') {
                const input = document.getElementById('chat-input');
                document.getElementById('chat-messages').innerHTML += "<br><span style='color:#007bff'>나:</span> " + input.value;
                const cmd = input.value;
                input.value = "";
                // Here we will connect real AI backend
                setTimeout(() => {
                    document.getElementById('chat-messages').innerHTML += "<br><b>AI:</b> 명령을 접수했습니다. 업무를 분석 중입니다...";
                }, 1000);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
