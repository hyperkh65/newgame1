<!DOCTYPE html>
<html>
<head>
    <title>AI AGENT OFFICE - OPERATIONAL SYSTEM</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        #control-panel { position: absolute; right: 20px; top: 20px; width: 250px; background: rgba(0,0,0,0.85); color: #fff; padding: 20px; border-radius: 15px; border: 1px solid #444; }
        .dept-btn { width: 100%; padding: 10px; margin-bottom: 10px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; background: #333; color: white; }
        .dept-btn:hover { background: #555; }
        #log { font-size: 11px; height: 150px; overflow-y: auto; background: #000; padding: 5px; margin-top: 10px; border: 1px solid #333; color: #0f0; font-family: monospace; }
        #status-bar { position: absolute; bottom: 20px; left: 20px; color: white; background: rgba(0,0,0,0.6); padding: 10px; border-radius: 8px; }
    </style>
</head>
<body>
    <div id="control-panel">
        <h2 style="font-size:16px; margin-top:0;">COMMAND CENTER</h2>
        <button class="dept-btn" style="border-left:5px solid #ff4757" onclick="callAgent('Marketing')">마케팅: SNS 분석 지시</button>
        <button class="dept-btn" style="border-left:5px solid #1e90ff" onclick="callAgent('Sales')">영업: 견적서 작성 지시</button>
        <button class="dept-btn" style="border-left:5px solid #2ed573" onclick="callAgent('Design')">디자인: AI 이미지 생성</button>
        <button class="dept-btn" style="border-left:5px solid #ffa502" onclick="callAgent('Accounting')">회계: 거래명세표 정리</button>
        <div id="log">>> SYSTEM READY...</div>
    </div>
    <div id="status-bar">AGENT STATUS: IDLE</div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xd1d9e6);
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // Lighting
        scene.add(new THREE.AmbientLight(0xffffff, 0.8));
        camera.position.set(0, 15, 25);
        camera.lookAt(0, 0, 0);

        // Floor
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(60, 40), new THREE.MeshPhongMaterial({ color: 0xffffff }));
        floor.rotation.x = -Math.PI/2;
        scene.add(floor);

        // Agent Class with State
        class Agent {
            constructor(name, x, z, color) {
                this.name = name;
                this.color = color;
                this.group = new THREE.Group();
                const body = new THREE.Mesh(new THREE.CapsuleGeometry(0.3, 1), new THREE.MeshPhongMaterial({color: color}));
                this.group.add(body);
                this.group.position.set(x, 1, z);
                scene.add(this.group);
                this.target = new THREE.Vector3(x, 1, z);
                this.busy = false;
            }
            update() {
                const dist = this.group.position.distanceTo(this.target);
                if (dist > 0.3) {
                    const dir = new THREE.Vector3().subVectors(this.target, this.group.position).normalize();
                    this.group.position.addScaledVector(dir, 0.1);
                } else if (this.busy) {
                    this.busy = false;
                    addLog(this.name + " 팀원이 업무를 완료했습니다.");
                }
            }
            work(task) {
                this.busy = true;
                this.target.set(0, 1, 0); // Move to Meeting Room (Center)
                addLog(this.name + ": " + task + " 업무를 시작합니다...");
            }
        }

        const agents = {
            'Marketing': new Agent('Marketing', -15, -10, 0xff4757),
            'Sales': new Agent('Sales', 15, -10, 0x1e90ff),
            'Design': new Agent('Design', -15, 10, 0x2ed573),
            'Accounting': new Agent('Accounting', 15, 10, 0xffa502)
        };

        function addLog(msg) {
            const log = document.getElementById('log');
            log.innerHTML += "<br>> " + msg;
            log.scrollTop = log.scrollHeight;
        }

        function callAgent(dept) {
            const tasks = {
                'Marketing': '최신 SNS 트렌드 분석',
                'Sales': '제품 견적서(PDF) 생성',
                'Design': '신제품 홍보 배너 디자인',
                'Accounting': '금융 명세표 정산'
            };
            agents[dept].work(tasks[dept]);
            document.getElementById('status-bar').innerText = "AGENT STATUS: " + dept + " WORKING...";
        }

        function animate() {
            requestAnimationFrame(animate);
            Object.values(agents).forEach(a => a.update());
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
