<!DOCTYPE html>
<html>
<head>
    <title>AI OFFICE SIMS - LIVING WORLD</title>
    <style>
        body { margin: 0; background: #222; overflow: hidden; font-family: 'Tahoma', sans-serif; }
        #ui-panel { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: #0f0; padding: 10px 30px; border-radius: 50px; border: 2px solid #0f0; font-weight: bold; pointer-events: none; }
    </style>
</head>
<body>
    <div id="ui-panel">SIMULATING OFFICE LIFE... | ACTIVE EMPLOYEES: 8</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // --- 1. Engine Setup (High Detail) ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xd1d9e6);
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        document.body.appendChild(renderer.domElement);

        // Lighting (Professional Studio Style)
        const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.8);
        scene.add(hemiLight);
        const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
        dirLight.position.set(20, 40, 20);
        dirLight.castShadow = true;
        scene.add(dirLight);

        // --- 2. Advanced Office Assets ---
        // Polished Floor
        const floor = new THREE.Mesh(new THREE.PlaneGeometry(60, 40), new THREE.MeshPhongMaterial({ color: 0xffffff, shininess: 100 }));
        floor.rotation.x = -Math.PI/2;
        floor.receiveShadow = true;
        scene.add(floor);

        // Room Walls (Sims Style - Partial Cutaway)
        function createWall(w, h, d, x, z) {
            const wall = new THREE.Mesh(new THREE.BoxGeometry(w,h,d), new THREE.MeshPhongMaterial({color: 0xcccccc}));
            wall.position.set(x, h/2, z);
            scene.add(wall);
        }
        createWall(60, 4, 0.5, 0, -20); // Back wall
        createWall(0.5, 4, 40, -30, 0); // Left wall

        // Detailed Furniture Group
        function createDesk(x, z, deptColor) {
            const group = new THREE.Group();
            // Table
            const table = new THREE.Mesh(new THREE.BoxGeometry(3, 1.5, 2), new THREE.MeshPhongMaterial({color: 0xffffff}));
            table.position.y = 0.75;
            group.add(table);
            // Monitor
            const mon = new THREE.Mesh(new THREE.BoxGeometry(1.2, 0.8, 0.1), new THREE.MeshPhongMaterial({color: 0x333333}));
            mon.position.set(0, 2, -0.5);
            group.add(mon);
            // Chair
            const chair = new THREE.Mesh(new THREE.CylinderGeometry(0.5, 0.5, 1), new THREE.MeshPhongMaterial({color: deptColor}));
            chair.position.set(0, 0.5, 1.2);
            group.add(chair);

            group.position.set(x, 0, z);
            scene.add(group);
        }

        // Layout
        for(let i=0; i<4; i++) createDesk(-20 + i*12, -10, 0x1e90ff); // Sales/Dev
        for(let i=0; i<4; i++) createDesk(-20 + i*12, 10, 0xff4757);  // Design/Market

        // --- 3. Sims-like Employee Class ---
        class Employee {
            constructor(x, z, color) {
                this.group = new THREE.Group();
                const body = new THREE.Mesh(new THREE.CapsuleGeometry(0.3, 1), new THREE.MeshPhongMaterial({color: color}));
                this.group.add(body);
                const head = new THREE.Mesh(new THREE.SphereGeometry(0.35), new THREE.MeshPhongMaterial({color: 0xffdbac}));
                head.position.y = 1.2;
                this.group.add(head);

                this.group.position.set(x, 1, z);
                scene.add(this.group);

                this.target = new THREE.Vector3(x, 1, z);
                this.state = 'working';
                this.timer = Math.random() * 500;
            }

            update() {
                this.timer--;
                if (this.timer <= 0) {
                    // New Task: Go to water, visit coworker, or return to desk
                    this.target.set((Math.random()-0.5)*50, 1, (Math.random()-0.5)*30);
                    this.timer = 200 + Math.random() * 500;
                }

                // Move toward target (Simple Sims AI)
                const dir = new THREE.Vector3().subVectors(this.target, this.group.position).normalize();
                if (this.group.position.distanceTo(this.target) > 0.5) {
                    this.group.position.addScaledVector(dir, 0.05);
                    this.group.rotation.y = Math.atan2(dir.x, dir.z);
                }
            }
        }

        const employees = [
            new Employee(-20, -10, 0x1e90ff), new Employee(-8, -10, 0x1e90ff),
            new Employee(4, -10, 0x1e90ff), new Employee(16, -10, 0x1e90ff),
            new Employee(-20, 10, 0xff4757), new Employee(-8, 10, 0xff4757),
            new Employee(4, 10, 0xff4757), new Employee(16, 10, 0xff4757)
        ];

        camera.position.set(0, 15, 30);
        camera.lookAt(0, 0, 0);

        function animate() {
            requestAnimationFrame(animate);
            employees.forEach(e => e.update());
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
